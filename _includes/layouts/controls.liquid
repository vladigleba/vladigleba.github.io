{% assign hours = totalReadingTime | divided_by: 60.0 | floor %}
{% assign minutes = totalReadingTime | modulo: 60 %}

<div class="stats">
  <div class="stat">
    <span class="stat-count">{{ seriesCount }}</span>
    <span class="stat-label">Series</span>
  </div>

  <div class="stat">
    <span class="stat-count">{{ articleCount }}</span>
    <span class="stat-label">Articles</span>
  </div>

  <div class="stats-popup-wrapper">
    <button 
      class="stat-button" 
      id="stats-popup-button"
      aria-label="Show reading statistics"
      aria-expanded="false"
      aria-controls="stats-popup">
      <svg class="chevron-icon" aria-hidden="true">
        <use href="/assets/images/icons.svg#chevron-down"></use>
      </svg>
    </button>
    
    <div class="stats-popup" id="stats-popup" role="region" aria-label="Reading statistics">
      <div class="popup-content">
        <div class="popup-stat">
          <span class="popup-stat-value">{{ standaloneArticleCount }}</span>
          <span class="popup-stat-label">Standalone Articles</span>
        </div>
        <div class="popup-stat">
          <span class="popup-stat-value">{{ seriesArticleCount }}</span>
          <span class="popup-stat-label">Series Articles</span>
        </div>
        <div class="popup-stat">
          <span class="popup-stat-value">{{ hours }}h {{ minutes }}m</span>
          <span class="popup-stat-label">Total Reading Time</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="control-wrapper">
  <div class="posts-toggle">
    <span class="switch-label">Group by series</span>
    <label class="switch" for="posts-view-switch">
      <input id="posts-view-switch" type="checkbox" aria-label="Toggle posts view" />
      <span class="slider" aria-hidden="true"></span>
    </label>
  </div>
  
  <div class="posts-sort">
    <label class="switch-label" for="posts-sort-select">Sort by</label>
    <select id="posts-sort-select" aria-label="Sort posts">
      <option value="reading">Reading order</option>
      <option value="updated">Recently updated</option>
      <option value="shortest">Shortest read</option>
      <option value="longest">Longest read</option>
    </select>

    <svg class="select-arrow" aria-hidden="true">
      <use href="/assets/images/icons.svg#chevron-down"></use>
    </svg>
  </div>
</div>